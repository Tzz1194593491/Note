# 1.了解Web和网络基础

---

## 1.HTTP协议简介

![image-20230801142340487](C:\Users\Tang\Desktop\github-Note\Note\图解HTTP\1.了解Web和网络基础.assets\image-20230801142340487.png)

HTTP协议，又称超文本传输协议，是一种数据传输规范。如上图，浏览器通过url访问到服务端上的资源，服务器传输回浏览器，这其中就是使用的是HTTP协议。

> HTTP协议发展历史
>
> HTTP/0.9 - 1990
>
> HTTP/1.0 - 1996
>
> HTTP/1.1 - 1997
>
> HTTP/2.0 - 1999

## 2.理解HTTP协议的所需的基础内容 - TCP/IP

### TCP/IP协议簇：网络设备互相通信之间，何时通信，何时结束，传输什么样的数据格式的一系列规则，将其统称为协议

![image-20230801143633909](C:\Users\Tang\Desktop\github-Note\Note\图解HTTP\1.了解Web和网络基础.assets\image-20230801143633909.png)

### 分层管理

TCP/IP按层次划分为四层：应用层，传输层，网络层，数据链路层。

分层管理的优点：分层管理使得设计变得更简单；可以根据需要替换掉某一层，而不是替换全部。

> 应用层：决定向用户提供应用服务时通信的活动。例如有FTP（文件传输协议），DNS（域名解析服务），HTTP协议。
>
> 传输层：传输层对上层应用层，用于提供处于网络连接的两台设备的数据传输。传输层具有的协议：TCP协议，UDP协议
>
> 网络层：网路层用来处理网络上流动的数据包，数据包时网络传输过程中的最小数据单位。该层规定通过哪一条路径到达对方的计算机并将数据包传输给对方。
>
> 数据链路层：用来处理网络硬件部分。硬件均属于数据链路层的作用范畴。

TCP/IP数据传输图

![image-20230801150059573](C:\Users\Tang\Desktop\github-Note\Note\图解HTTP\1.了解Web和网络基础.assets\image-20230801150059573.png)

传输流程：	（一层一层封装数据）

发送方：

在应用层，添加应用协议首部，而后用户从浏览器发送一个HTTP请求，去请求一个服务器上的数据。

在传输层，添加传输协议首部，再将从应用层发出数据，进行处理，对HTTP请求报文进行分割，将各个报文打上标记序号以及端口号后，转发给网络层。

在网络层，添加IP首部，再在数据中增添通信目的地的MAC地址，而后将数据转发给链路层。

在链路层中，添加以太网首部，再将数据通过硬件设备传输给服务器。

接收方：

在链路层中：接收到来自发送方的数据，去除以太网首部，而后将数据传输给网络层。

在网络层中：接受链路层的数据，去除IP首部，而后将数据传输给传输层。

在传输层中：接受网络层的数据，去除传输协议首部，而后将数据传输给应用层。

在应用层中：接受传输层的数据，按照应用层协议对数据进行解析。

![image-20230801151352153](C:\Users\Tang\Desktop\github-Note\Note\图解HTTP\1.了解Web和网络基础.assets\image-20230801151352153.png)

## 3.与HTTP相关的协议：IP，TCP和DNS

IP，TCP，DNS分别位于网络层，传输层，应用层。

### 1.负责传输的IP协议

（IP和IP地址区别：IP是一种传输层协议名称。IP地址是节点被分配的地址，IP地址还可与设备的MAC地址绑定，通常IP地址可变换，MAC地址不可变。）

在HTTP传输中，IP传输的时候依赖MAC地址。在实际情况中，通信双方在同一局域网的情况很少，通常需要多个计算机和网络设备进行中转才能将数据发送给接收方。在多个计算机和网络设备中，采用ARP协议来将IP地址解析为对应的MAC地址，来依次中转请求，最后到达通信方。

![image-20230801153105904](C:\Users\Tang\Desktop\github-Note\Note\图解HTTP\1.了解Web和网络基础.assets\image-20230801153105904.png)



### 2.确保可靠性的TCP协议

提供可靠的字节流服务

字节流服务：为了方便传输，将大数据块分割为以报文段为单位来进行管理。

可靠的传输服务：能够把数据准确的传输给对方。

为了实现上面的特性，TCP协议采用了3次握手策略。即TCP将数据包发送出去后，一定会确认是否将数据送达。

流程：

其中所使用的标志：SYN（synchronize），ACK（acknowledgement）

发送端首相发送带有SYN标志的数据包给接收端，接收端收到后，会发送带有SYN/ACK的数据包来回应发送端，以此传达确认信息，最后发送端再发送一个SYN标志，来表示“握手”结束。（若在某个阶段中握手突然被中断了，那么会重新开始握手过程）

![image-20230801154715776](C:\Users\Tang\Desktop\github-Note\Note\图解HTTP\1.了解Web和网络基础.assets\image-20230801154715776.png)

TCP保证可靠的手段：

**校验和**：TCP协议在发送和接收数据时，都会计算一个校验和，用来检测数据是否在传输过程中发生了错误或损坏。校验和的计算包括TCP首部、TCP数据和TCP伪首部。

**序列号和确认应答**：TCP协议给每个发送的字节都分配一个序列号，用来标识数据的顺序。接收方在收到数据后，会发送一个确认应答（ACK）报文，告诉发送方已经收到了哪些数据，以及期望接收下一个字节的序列号。这样，发送方就可以知道哪些数据已经成功传输，哪些数据需要重传

**超时重传**：TCP协议为每个发送的数据段都设置一个超时时间，如果在超时时间内没有收到对应的确认应答，就认为数据丢失了，需要重新发送。超时时间是动态计算的，根据网络的往返时间（RTT）和抖动（方差）来调整。

**连接管理**：TCP协议在建立和终止连接时，都会使用三次握手和四次挥手的过程，来确保双方都同意连接的建立和释放，以及避免出现半开连接或者僵尸连接等问题。

**流量控制**：TCP协议通过滑动窗口机制，来控制发送方的发送速度，使之不超过接收方的处理能力。滑动窗口的大小是由接收方根据其缓冲区的剩余空间来通知发送方的。如果滑动窗口为零，表示接收方已经没有空间来接收数据了，发送方就要停止发送，直到接收到新的窗口大小。

**拥塞控制**：TCP协议通过慢启动、拥塞避免、快重传和快恢复等算法，来控制网络中的数据量，避免因为网络拥塞而导致大量的丢包和重传。拥塞控制是由发送方根据网络状况来调整自己的拥塞窗口大小的。

### 3.负责域名解析的DNS服务

DNS（Domain Name System）服务位于应用层的协议，是提供域名到IP之间的解析服务。

计算机可以被赋予主机名和域名，IP地址。人往往适合记忆字符配合数字的表示，机器往往适合解析理解纯数字的表示。在这其中DNS（域名解析服务）就解决了这个问题。比如这个域名www.hackr.jp，客户端访问这个域名下的资源时，需要先使用DNS服务，将域名解析为IP地址，再通过这个IP去与对应的服务器通信。

![image-20230801160532857](C:\Users\Tang\Desktop\github-Note\Note\图解HTTP\1.了解Web和网络基础.assets\image-20230801160532857.png)



## 4.各个协议与HTTP的关系图

![image-20230801160644363](C:\Users\Tang\Desktop\github-Note\Note\图解HTTP\1.了解Web和网络基础.assets\image-20230801160644363.png)



## 5. URI 和 URL

### 1.关系

URI：统一资源标识符。由某个协议方案表示的资源的定位标识符。协议方案是指访问资源所采用的协议类型名称。用字符串来标识某一互联网资源。

URL：统一资源定位符。表示资源的地点（在互联网中所处的位置）

需要注意的是URL是URI的子集，某种程度上URI可以替换URL

### 2.URI的格式

![image-20230801161448757](C:\Users\Tang\Desktop\github-Note\Note\图解HTTP\1.了解Web和网络基础.assets\image-20230801161448757.png)

1. 协议方案名：获取资源类型时需要指定的协议类型，不区分大小写，最后附上一个冒号。也可使用 data: 或 javascript: 这类指定数据或脚本程序的方案名。
2. 登录信息：指定用户名和密码以此从服务端获取数据时做必要的身份验证。**此选项是可选项**
3. 服务器地址：使用绝对URI必须指定服务器地址，服务器地址可以为域名，也可以为IPv4地址（例如：192.168.1.1），也可以为IPv6地址（例如：[0:0:0:0:0:0:0:1]）
4. 服务器端口号：指定服务器连接的端口号，该选项不填，则使用默认的端口号。
5. 带层次的文件路径：指定服务器上的文件路径来定位对应的资源（也可以是服务器上Web服务的路由）
6. 查询字符串：指定文件路径下的特定资源。**此选项是可选项**
7. 片段标识符：使用片段标识符通常可标记出已获取资源中的子资源。**此选项是可选项**